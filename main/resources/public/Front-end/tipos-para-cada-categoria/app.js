var db_inicial = {
    "data": [
        {
            "id": 1,
            "titulo": "WhatsApp",
            "tutorial": "O WhatsApp reconhece seus contatos ao acessar a lista de contatos do seu telefone. Ou seja, a sua Agenda. Contatos já cadastrado e números com quem vocë trocou telefonema ou SMS já estarão disponíveis nesse acervo e você pode adicionar mais.",
            "url": "https://www.youtube.com/embed/hS8yibiS3dE",
            "categoria": "Aplicativos de redes sociais"
        },
        {
            "id": 2,
            "titulo": "Itau",
            "tutorial": "Para efetuar o cadastro no próprio aplicativo, basta acessá-lo entre 6h e 21h e seguir as instruções abaixo: Na tela inicial, informe os dados da sua agência e conta,clique em “Esqueci ou não tenho a senha”, selecione a opção apresentada para Alterar Senha, fotografe o cartão, informe o código de segurança, digite sua nova senha de 8 dígitos, confirme informando sua senha de 6 dígitos, a mesma utilizada no seu cartão do banco",
            "url": "https://www.youtube.com/embed/rIrpsn8rMW8",
            "categoria": "Aplicativos de banco"
        },
        {
            "id": 3,
            "titulo": "Android",
            "tutorial": "Familiarize-se com os botões. Se colocar o iPhone sobre uma superfície reta, com a tela virada para cima, você vai ver os botões nesta ordem: Botão de bloqueio: do lado direito (modelos 6 ou superiores) ou em cima do iPhone (modelo 5S e inferiores). Pressione-o uma vez para desligar a tela; pressione-o de novo para ligá-la. Além disso, você também pode mantê-lo pressionado para ligar ou desligar o iPhone. Botão de volume: os dois botões que ficam no lado esquerdo do iPhone. O de baixo diminui o volume das músicas, dos vídeos ou do telefone em si, enquanto o de cima o aumenta. Botão de toque/silêncio: botão que fica acima dos controles de volume, do lado esquerdo do iPhone. Passe-o para cima para ativar o modo de toque; passe-o para baixo para ativar o modo silencioso ou de vibração. Quando o iPhone estiver em modo silencioso, a peça vai exibir um detalhe de cor laranja. Botão de início: botão circular que fica sob a tela do iPhone. Clique nele uma vez para ativar a tela de bloqueio do aparelho; com a tela desbloqueada, pressione-o uma vez quando estiver usando um aplicativo para minimizá-lo; pressione-o duas vezes para mostrar todos os programas abertos.",
            "url": "https://www.youtube.com/embed/UJbBWh5u_44",
            "categoria": "Uso do celular"
        },
        {
            "id": 4,
            "titulo": "Spotify",
            "tutorial": "O Spotify foi fundado em 2006 e é o serviço de streaming de música com mais usuários no mundo, 100 milhões de assinantes registrados em abril de 2019, contra a marca de 60 milhões do Apple Music. Isso significa que, provavelmente, ele é o mais popular dentro do seu círculo social, o que facilita tudo quando se trata compartilhamento de músicas, ver o que um amigo está ouvindo, seguir pessoas e criar playlist colaborativa. Se você ainda não tem uma conta, será preciso criá-la com um e-mail pessoal ou fazer o login com o Facebook. O processo pode ser feito antes de entrar no aplicativo, pelo site de inscrição ou por meio do aplicativo do Spotify para Android, iOS ou Windows e Mac.",
            "url": "https://www.youtube.com/embed/wjZN_zzl_aQ",
            "categoria": "Aplicativos de música"
        },
        {
            "id": 5,
            "titulo": "Vivo",
            "tutorial": "No app Vivo: 1_Informe o númeo do seu celular Vivo com o DDD 2_Você receberá um código via SMS 3_Depois de fazer o primeiro login, voce não precisará informar os seus dados quando acessar o app novamente",
            "url": "https://www.youtube.com/embed/PmnG53lNBkY",
            "categoria": "Aplicativos de telefonia"
        },
        {
            "id": 6,
            "titulo": "Youtube",
            "tutorial": "A busca de vídeos no YouTube funciona de forma bastante simples, muito parecida com o Google. Basta digitar a palavra-chave e clicar na lupa para pesquisar e encontrar resultados de busca. Para encontrar o conteúdo de forma rápida, o YouTube oferece a opção de filtros, como em uma busca avançada. Você pode selecionar a data do upload, tipo de conteúdo (vídeo, playlist, filme, canal ou programa), duração do vídeo (curto – menos de 4 minutos – ou longo – mais de 20 minutos), características (4K, alta definição, legendas, Creative Commons, 3D, ao vivo, comprado e 360º) e pela classificação (relevância, data de upload, contagem de visualizações e avaliações) de cada vídeo.",
            "url": "https://www.youtube.com/embed/nWUPWkAbslE",
            "categoria": "Aplicativos de redes sociais"
        },
        {
            "id": 7,
            "titulo": "Netflix",
            "tutorial": "Depois de abrir o aplicativo ou o site da Netflix, selecione Entrar para acessar sua conta e começar a assistir a seus filmes e séries. Você pode assistir à Netflix em qualquer aparelho compatível e até em mais de um ao mesmo tempo. É possível criar perfis para cada pessoa que mora com você. Assim, cada um tem uma experiência personalizada na Netflix. Sua conta pode ter até cinco perfis individuais, e cada um desses perfis pode ter um nível de maturidade diferente. Cada perfil terá suas próprias recomendações de acordo com as classificações e preferências da pessoa que usa o perfil.Você pode buscar títulos que sejam do seu interesse ou navegar pelas nossas sugestões. Depois que você começar a assistir e avaliar os títulos, começaremos a mostrar recomendações. Você também pode ativar legendas, legendas ocultas ou áudio alternativo em diversos títulos ou navegar pelos títulos que atendem às suas preferências de idioma de legendas ou áudio.",
            "url": "https://www.youtube.com/embed/67tTI7b7YZE",
            "categoria": "Aplicativos de filmes e séries"
        },
        {
            "id": 8,
            "titulo": "WhatsApp",
            "tutorial": "O WhatsApp reconhece seus contatos ao acessar a lista de contatos do seu telefone. Ou seja, a sua Agenda. Contatos já cadastrado e números com quem vocë trocou telefonema ou SMS já estarão disponíveis nesse acervo e você pode adicionar mais.",
            "url": "https://www.youtube.com/embed/hS8yibiS3dE",
            "categoria": "Gratuito"
        },
        {
            "id": 9,
            "titulo": "Como usar o site Tutoritec",
            "tutorial": "Nosso site é muito simples, caso você queira ter acesso a mais conteudos você terá que pagar para criar uma conta premium",
            "url": "https://www.youtube.com/embed/hS8yibiS3dE",
            "categoria": "Uso do site"
        }
    ]
}

let queryString = new URLSearchParams(window.location.search);
nome_cat = queryString.get("name");

let db = JSON.parse(localStorage.getItem('db_tutorial'));

if (!db){
    localStorage.setItem('db_tutorial', JSON.stringify(db_inicial));
    db = db_inicial
}

function init() {
    let texto = "";
    for (let i = 0; i < db.data.length; i++) {
        let contato = db.data[i];
        
        if (contato.categoria == nome_cat)
        {
        texto += `
                <div class="col-6">
                    <a href="/tutorial/index.html?id=${contato.id}"><button class="btn-13 custom-btn">${contato.titulo}</button></a>
                </div>
        `;
        }
    }
    document.querySelector("#btn-area").innerHTML = texto

}

function goBack() {
    window.history.back()
}

function logoutUser () {
    usuarioCorrente = {};
    sessionStorage.setItem ('usuarioCorrente', JSON.stringify (usuarioCorrente));
    window.location = LOGIN_URL;
}

colocarSair();

function colocarSair(){
    let tipo = JSON.parse(sessionStorage.getItem('usuarioCorrente')).tipo;
    let nomeUsu = "";

    let textoNome;
    
    if (tipo == "user")
    {
        nomeUsu = JSON.parse(sessionStorage.getItem('usuarioCorrente')).nome;
    } else if (tipo == "adm")
    {
        nomeUsu = JSON.parse(sessionStorage.getItem('usuarioCorrente')).usuario;
    }
    
    textoNome = `<p>${nomeUsu} | <a onclick="logoutUser()" href="/inicio-login/login.html">Sair</a></p>`;

    document.querySelector('#insertSair').innerHTML = textoNome;
}

testarLoginUser()
function testarLoginUser ()
{
    let tipoUsuarioLogado = JSON.parse(sessionStorage.getItem('usuarioCorrente')).tipo;
    

    if (tipoUsuarioLogado != "user" && tipoUsuarioLogado != "adm") {
        alert("Você não tem acesso a essa página.");
        window.location = "/inicio-login/login.html";
    }
}
